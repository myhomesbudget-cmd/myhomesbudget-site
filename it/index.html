<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MyHomesBudget — Bilancio familiare semplice</title>
  <meta name="description" content="Gestisci entrate, spese e risparmi in modo semplice. Prova gratis per 30 giorni.">

  <!-- CSP -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 img-src 'self' https: data:;
                 style-src 'self' 'unsafe-inline';
                 script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google-analytics.com;
                 connect-src 'self' https://www.google-analytics.com https://region1.google-analytics.com;
                 font-src 'self' https: data:;
                 frame-ancestors 'none';
                 base-uri 'self';
                 form-action 'self'">

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LSD3V9G957"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-LSD3V9G957', { anonymize_ip: true });
  </script>

  <!-- Redirect post-verifica -->
  <script>
    (function(){
      function itPrefix(){ var m = location.pathname.match(/^\/(it|ita)(\/|$)/i); return m ? ("/"+m[1].toLowerCase()+"/") : "/it/"; }
      var q=new URLSearchParams(location.search), hash=location.hash||'';
      var verified = q.get('verified')==='1'||q.get('status')==='verified'||q.get('confirmed')==='1'||hash.includes('verified');
      if(!verified) return;
      try{localStorage.setItem('email_verified','1');localStorage.setItem('last_verified',String(Date.now()));}catch(e){}
      var done=false; try{done=(localStorage.getItem('onboarding_completed')==='1');}catch(e){}
      location.replace(itPrefix() + (done?'dashboard.html':'onboarding.html'));
    })();
  </script>

  <!-- Canonical + hreflang -->
  <link rel="canonical" href="https://www.myhomesbudget.com/it/" />
  <link rel="alternate" href="https://www.myhomesbudget.com/it/" hreflang="it" />
  <link rel="alternate" href="https://www.myhomesbudget.com/en/" hreflang="en" />
  <link rel="alternate" href="https://www.myhomesbudget.com/es/" hreflang="es" />
  <link rel="alternate" href="https://www.myhomesbudget.com/" hreflang="x-default" />

  <!-- Social -->
  <meta property="og:title" content="MyHomesBudget — Gestisci il tuo bilancio domestico in modo semplice e intuitivo" />
  <meta property="og:description" content="Inserisci le tue spese e le entrate in pochi click e tieni tutto sotto controllo. Prova gratis per 30 giorni." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.myhomesbudget.com/it/" />
  <meta property="og:image" content="https://www.myhomesbudget.com/social.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Performance -->
  <link rel="preload" href="/bg.webp" as="image" imagesrcset="/bg.webp" />
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
  <link rel="preconnect" href="https://region1.google-analytics.com" crossorigin>
  <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#0f0f10">
  <meta name="color-scheme" content="light dark">

  <style>
    :root{font-family:-apple-system,system-ui,"Segoe UI",Roboto,sans-serif}
    *{box-sizing:border-box}
    a:focus-visible,button:focus-visible{outline:2px solid #00cec9; outline-offset:2px; border-radius:6px}

    html,body{height:100%;}
    /* niente scroll della pagina */
    html,body{overflow:hidden;}

    /* Sfondo */
    body{
      margin:0;color:#fff;
      background:url("/bg.webp") no-repeat center/cover fixed;
    }
    body::before{content:"";position:fixed;inset:0;background:rgba(0,0,0,.05);z-index:-1}

    /* Contenitore centrato che verrà eventualmente scalato per entrare in viewport */
    .wrap{max-width:1100px;margin:0 auto;padding:16px 20px;}
    #fitRoot{transform-origin: top center; will-change: transform;}

    /* Nav */
    .nav{display:flex;justify-content:space-between;align-items:center}
    .logo-link{display:flex;align-items:center;gap:8px;text-decoration:none}
    .logo-image{height:32px}
    .logo-text{font-weight:600;color:#fff;font-size:1.05rem;text-shadow:0 1px 2px rgba(0,0,0,.35)}
    .right-bar{display:flex;gap:8px;align-items:center}
    .login-link,.nav .nav-link{color:#fff;text-decoration:none;padding:6px 10px;border-radius:10px;background:rgba(0,0,0,.28);border:1px solid rgba(255,255,255,.25);font-weight:700}
    .login-link:hover,.nav .nav-link:hover{background:rgba(0,0,0,.38)}
    .lang-selector{font-size:18px;display:flex;gap:6px}
    .lang-selector a{color:#fff;text-decoration:none;padding:6px 8px;border-radius:8px}
    .lang-selector a:hover{background:rgba(255,255,255,.12)}

    /* Layout principale: 3 blocchi in altezza fissa + footer */
    main{display:grid;gap:10px;
      grid-template-rows:  minmax(180px, 1fr)  minmax(210px, 1fr)  minmax(260px, 1.2fr)  auto;
    }

    /* Hero */
    .hero{
      display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:10px;
      padding:8px 10px;margin:0;
    }
    .hero h1{
      color:#fff; /* bianco pieno */
      font-size:clamp(1.6rem,4.6vw,2.2rem);
      line-height:1.15;margin:0;
      text-shadow:0 2px 6px rgba(0,0,0,.45);
    }
    .hero p{
      color:#fff; /* bianco pieno, nessun box */
      margin:0;
      font-size:clamp(.95rem,1.6vw,1.05rem);
      text-shadow:0 1px 2px rgba(0,0,0,.35);
    }
    .cta{display:inline-block;background:#111;color:#fff;padding:10px 14px;border-radius:12px;font-weight:800;text-decoration:none;
      box-shadow:0 10px 24px rgba(0,0,0,.15);transition:transform .15s ease, filter .15s ease}
    .cta:hover{filter:brightness(1.06);transform:translateY(-1px)}
    .cta-ghost{background:transparent;border:1px solid rgba(255,255,255,.6);margin-left:8px}
    .cta-ghost:hover{background:rgba(0,0,0,.15)}

    /* Cards “benefit” e “come funziona” */
    .grid{display:grid;gap:10px;grid-template-columns:repeat(3,1fr)}
    .card{
      background:rgba(255,255,255,.55);
      backdrop-filter:saturate(1.05) blur(5px);
      -webkit-backdrop-filter:saturate(1.05) blur(3px);
      color:#111;padding:14px;border-radius:14px;
      box-shadow:0 10px 30px rgba(0,0,0,.08);text-align:center;
    }
    .card h3{margin:0 0 4px;font-size:1rem}
    .card p{margin:0;font-size:.95rem}

    .steps .step{display:flex;gap:10px;align-items:flex-start;background:rgba(255,255,255,.66);
      border-radius:12px;padding:10px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.04)}
    .nbr{flex:0 0 26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;
      background:rgba(108,92,231,.75);color:#fff;font-weight:800}

    /* Pricing compatto */
    .pricing-panel{padding:10px}
    .pricing-panel h3{margin:0 0 8px;text-align:center;color:#fff;text-shadow:0 1px 3px rgba(0,0,0,.35)}
    .pricing-grid{display:grid;gap:10px;grid-template-columns:repeat(3,1fr)}
    .price-card{position:relative;min-height:150px}
    .badge{position:absolute;top:8px;right:8px;background:#6c5ce7;color:#fff;border-radius:999px;padding:3px 8px;font-size:.72rem;font-weight:800;box-shadow:0 6px 16px rgba(0,0,0,.12)}
    .plan-title{margin:0;display:flex;gap:.4rem;flex-wrap:wrap;align-items:baseline;justify-content:center;font-size:1.06rem}
    .plan-title .plan-name{font-weight:800}
    .plan-title .price-inline{font-weight:900}
    .features{margin:4px 0 6px;color:#333;font-size:.93rem;line-height:1.35}
    .features ul{margin:0;padding:0;list-style:none}
    .features li{display:flex;gap:6px;align-items:flex-start;justify-content:center}
    .features li::before{content:"✓"; color:#2e7d32; font-weight:900}
    .btn-secondary{display:inline-block;background:linear-gradient(135deg,#6c5ce7,#00cec9);
      color:#fff;text-decoration:none;font-weight:800;border-radius:12px;padding:8px 12px;box-shadow:0 8px 22px rgba(0,0,0,.15)}

    /* Footer compatto */
    .footer{margin:6px 0 0;text-align:center;color:#e6e6e6;font-size:.9rem}
    .footer a{color:#fff}

    /* iOS: evita jank con background fixed */
    @supports (-webkit-touch-callout:none){ body{background-attachment:scroll} }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- NAV -->
    <nav class="nav" aria-label="Navigazione principale">
      <a href="/" title="myHomesBudget" class="logo-link">
        <img src="/homes.png" alt="myhomesbudget Logo" class="logo-image" loading="lazy">
        <span class="logo-text">MyHomesBudget</span>
      </a>
      <div class="right-bar">
        <a class="login-link" href="login.html">Accedi</a>
        <a class="nav-link" href="/it/pricing.html">Prezzi</a>
        <span class="lang-selector" aria-label="Selettore lingue">
          <a href="/it/" lang="it">IT</a><a href="/en/" lang="en">GB</a><a href="/es/" lang="es">ES</a>
        </span>
      </div>
    </nav>

    <!-- CONTENUTO SCALABILE -->
    <div id="fitRoot">
      <main>
        <!-- HERO -->
        <section class="hero">
          <h1>Gestisci il tuo bilancio domestico in modo semplice e intuitivo</h1>
          <p>Inserisci le tue spese e le entrate in pochi click e tieni tutto sotto controllo.</p>
          <div>
            <a class="cta" href="signup.html?plan=starter"
               onclick="gtag('event','cta_click',{lang:'it',placement:'hero_trial'});">Prova gratis per 30 giorni</a>
            <a class="cta cta-ghost" href="/it/pricing.html"
               onclick="gtag('event','cta_click',{placement:'hero_secondary',lang:'it'});">Scopri i piani</a>
          </div>
        </section>

        <!-- BENEFIT -->
        <section class="grid" aria-label="Benefici principali">
          <div class="card"><h3>Zero complicazioni</h3><p>Niente fogli di calcolo. Tutto chiaro e rapido.</p></div>
          <div class="card"><h3>Sempre con te</h3><p>iPhone, Android e PC. Presto installabile come PWA.</p></div>
          <div class="card"><h3>Privacy UE</h3><p>Dati in Europa e sotto il tuo controllo.</p></div>
        </section>

        <!-- COME FUNZIONA -->
        <section class="grid steps" aria-label="Come funziona">
          <div class="step"><div class="nbr">1</div><div><strong>Accedi</strong><br><span style="color:#444">Email o Google.</span></div></div>
          <div class="step"><div class="nbr">2</div><div><strong>Aggiungi movimenti</strong><br><span style="color:#444">Entrate/uscite in pochi click.</span></div></div>
          <div class="step"><div class="nbr">3</div><div><strong>Controlla i grafici</strong><br><span style="color:#444">Resta sul tuo budget.</span></div></div>
        </section>

        <!-- PIANI -->
        <section class="card pricing-panel" aria-label="Piani e prezzi">
          <h3>Scegli il tuo piano</h3>
          <div class="pricing-grid">
            <!-- STARTER -->
            <div class="card price-card">
              <h4 class="plan-title"><span class="plan-name">Starter</span><span class="sep">—</span>
                <span class="price-inline">Gratis <small>/ 30 giorni</small></span></h4>
              <div class="features">
                <ul>
                  <li>Budget e obiettivi personali</li>
                  <li>Categorie e sottocategorie personalizzate</li>
                  <li>Report base mensili</li>
                </ul>
              </div>
              <a class="btn-secondary" href="signup.html?plan=starter">Avvia la prova</a>
            </div>

            <!-- PLUS -->
            <div class="card price-card">
              <div class="badge" aria-hidden="true">Più scelto</div>
              <h4 class="plan-title"><span class="plan-name">Plus</span><span class="sep">—</span>
                <span class="price-inline">2,99€ <small>/ mese</small></span></h4>
              <div class="features">
                <ul>
                  <li>Tutto di Starter</li>
                  <li>Report dettagliati e filtri avanzati</li>
                  <li>Supporto prioritario via email</li>
                </ul>
              </div>
              <a class="btn-secondary" href="/it/paywall.html?plan=plus">Passa a Plus</a>
            </div>

            <!-- PRO -->
            <div class="card price-card">
              <h4 class="plan-title"><span class="plan-name">Pro</span><span class="sep">—</span>
                <span class="price-inline">4,99€ <small>/ mese</small></span></h4>
              <div class="features">
                <ul>
                  <li>Tutto di Plus</li>
                  <li>Obiettivi multipli e monitor su periodi custom</li>
                  <li>Accesso multi-dispositivo senza limiti</li>
                </ul>
              </div>
              <a class="btn-secondary" href="/it/paywall.html?plan=pro">Passa a Pro</a>
            </div>
          </div>
        </section>

        <!-- FOOTER -->
        <footer class="footer">
          © MyHomesBudget — <a href="/it/pricing.html">Piani & Prezzi</a> ·
          <a href="/it/privacy.html">Privacy</a> · <a href="/it/terms.html">Termini</a>
        </footer>
      </main>
    </div>
  </div>

  <!-- Fit-to-viewport: scala il contenuto se necessario per evitare scroll e sovrapposizioni -->
  <script>
    function fitToViewport(){
      const root = document.getElementById('fitRoot');
      if(!root) return;
      // altezza disponibile: viewport - padding top/bottom della .wrap
      const wrap = document.querySelector('.wrap');
      const wrapStyles = getComputedStyle(wrap);
      const verticalPad = parseFloat(wrapStyles.paddingTop) + parseFloat(wrapStyles.paddingBottom);

      const avail = window.innerHeight - verticalPad; // tutto dentro la wrap
      // reset scala per misurare l'altezza reale
      root.style.transform = 'scale(1)';
      const contentH = root.scrollHeight;

      // fattore di scala massimo = 1; minimo per sicurezza 0.8
      const scale = Math.max(0.8, Math.min(1, avail / contentH));

      root.style.transform = `scale(${scale})`;

      // centra verticalmente se rimane spazio
      const scaledH = contentH * scale;
      const extra = Math.max(0, (avail - scaledH) / 2);
      root.style.marginTop = extra + 'px';
      root.style.marginBottom = extra + 'px';
    }

    // Niente scroll di pagina
    document.documentElement.style.overflow = 'hidden';
    document.body.style.overflow = 'hidden';

    window.addEventListener('load', fitToViewport);
    window.addEventListener('resize', ()=>{ clearTimeout(window.__fitT); window.__fitT=setTimeout(fitToViewport, 120); });

    // GA view
    gtag('event','view_landing',{ lang:'it' });
  </script>
</body>
</html>
